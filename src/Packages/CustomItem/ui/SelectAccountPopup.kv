#:kivy 1.0.9

<CustomScrollViewButton>:
    id: ButtonToPress
    font_name: app.Configuration.GetElementValue('ProfileNameFontName')
    font_size: app.Configuration.GetElementValue('ProfileNameFontSize')
    background_color: app.Configuration.GetElementValue('TransparentBackgroundColor') 
    canvas.before:
        Color:
            rgba: root.BackgroundColor
        RoundedRectangle:
            pos: self.pos
            size: self.size

<SelectAccountPopup>:
    background_color: 0,0,0,0
    overlay_color: 0,0,0,0
    padding: app.Configuration.GetElementValue('PopupBorderWidth')
    
    # Canvas for the poup background background
    canvas.before:
        Color:
            rgba: [1,1,1,1]
        RoundedRectangle:
            pos: self.pos
            size: self.size
            radius: [(10, 10), (10, 10), (10, 10), (10, 10)]

    BoxLayout:
        orientation: 'vertical'

        # Canvas for the poup background background
        canvas.before: 
            Color:
                rgba: app.Configuration.GetElementValue('WindowBackgroundColor')
            RoundedRectangle:
                pos: self.pos
                size: self.size
                radius: [(10, 10), (10, 10), (10, 10), (10, 10)]

        # Main Box Layout
        BoxLayout:
            orientation: 'vertical'
            padding: ("30dp","20dp","30dp","20dp")
            spacing: "10dp"

            # First row with title and X button - y: 0.05
            BoxLayout:
                orientation: 'horizontal'
                size_hint: 1, 0.05

                BoxLayout:
                    id: CanvasLabelIdentifier
                    orientation: 'horizontal'

                    Label:
                        text: root.title
                        text_size: self.width, None
                        size: self.texture_size
                        halign: 'center'
                        font_name: 'Candarab'
                        font_size: 25

            # BoxLayout containting Account, SubAccount, Currency - y: 0.78
            BoxLayout:
                orientation:'horizontal'
                size_hint: 1, 0.68
                spacing: "10dp"
                padding: ("0dp","0dp","0dp","0dp")

                # Select Account box layout 
                BoxLayout:
                    id: SelectAccountBoxLayout
                    orientation: 'vertical'

                    Label:
                        size_hint: 1, 0.2
                        text: 'Account'
                        text_size: self.width, None
                        size: self.texture_size
                        halign: 'center'
                        font_name: 'Candarab'
                        font_size: 20
                    
                    ScrollView:
                        id: SelectAccountScrollView
                        size_hint: 1, 0.8
                        bar_inactive_color: app.Configuration.GetElementValue('ScrollViewBarBackgroundColor')
                        bar_color: app.Configuration.GetElementValue('ScrollViewBarBackgroundColor')

                        canvas.before:
                            Color:
                                rgba: app.Configuration.GetElementValue('CanvasBackgroundColor')
                            RoundedRectangle:
                                pos: self.pos
                                size: self.size
                                radius: [(10, 10), (10, 10), (10, 10), (10, 10)]

                        # Box containing Buttons
                        BoxLayout:
                            id: SelectAccountScrollViewBoxLayout
                            orientation: 'vertical'
                            size_hint: 1, None
                            height: self.minimum_height
                            padding: ("10dp", "10dp", "10dp", "10dp")
                            spacing: "0dp" 
                
                # Select SubAccount box layout 
                BoxLayout:
                    id: SelectSubAccountBoxLayout
                    orientation: 'vertical'

                    Label:
                        size_hint: 1, 0.2
                        text: 'SubAccount'
                        text_size: self.width, None
                        size: self.texture_size
                        halign: 'center'
                        font_name: 'Candarab'
                        font_size: 20
                    
                    ScrollView:
                        size_hint: 1, 0.8
                        bar_inactive_color: app.Configuration.GetElementValue('ScrollViewBarBackgroundColor')
                        bar_color: app.Configuration.GetElementValue('ScrollViewBarBackgroundColor')
                        id: SelectSubAccountScrollView

                        canvas.before:
                            Color:
                                rgba: app.Configuration.GetElementValue('CanvasBackgroundColor')
                            RoundedRectangle:
                                pos: self.pos
                                size: self.size
                                radius: [(10, 10), (10, 10), (10, 10), (10, 10)]

                        # Box containing Box Layout
                        BoxLayout:
                            id: SelectSubAccountScrollViewBoxLayout
                            orientation: 'vertical'
                            size_hint: 1, None
                            height: self.minimum_height
                            padding: ("10dp", "10dp", "10dp", "10dp")
                            spacing: "0dp" 

                
                # Select Currency box layout 
                BoxLayout:
                    id: SelectCurrencyBoxLayout
                    orientation: 'vertical'

                    Label:
                        size_hint: 1, 0.2
                        text: 'Currency'
                        text_size: self.width, None
                        size: self.texture_size
                        halign: 'center'
                        font_name: 'Candarab'
                        font_size: 20

                    ScrollView:
                        size_hint: 1, 0.8
                        bar_inactive_color: app.Configuration.GetElementValue('ScrollViewBarBackgroundColor')
                        bar_color: app.Configuration.GetElementValue('ScrollViewBarBackgroundColor')
                        id: SelectCurrencyScrollView

                        canvas.before:
                            Color:
                                rgba: app.Configuration.GetElementValue('CanvasBackgroundColor')
                            RoundedRectangle:
                                pos: self.pos
                                size: self.size
                                radius: [(10, 10), (10, 10), (10, 10), (10, 10)]

                        # Box containing Box Layout
                        BoxLayout:
                            id: SelectCurrencyScrollViewBoxLayout
                            orientation: 'vertical'
                            size_hint: 1, None
                            height: self.minimum_height
                            padding: ("10dp", "10dp", "10dp", "10dp")
                            spacing: "0dp" 

            # Box Layout containg a string of message
            BoxLayout:
                size_hint: 1, 0.1
                id: MessageBoxLayout
                orientation: 'vertical'

                Label:
                    id: update_message
                    size_hint: 1, 0.2
                    text: 'Selecting an account...'
                    text_size: self.width, None
                    size: self.texture_size
                    halign: 'left'
                    font_name: 'Candarab'
                    font_size: 17
            # Box Layout containg the Confirmation button - y : 0.17
            BoxLayout:
                orientation: 'horizontal'
                spacing: "10dp"
                size_hint: 1, 0.17
                pos_hint: {'x': 0, 'y': 1}

                Button:
                    background_color: 0,0,0,0
                    canvas.before:
                        Color:
                            rgba: app.Configuration.GetElementValue('ConfirmationBtnBackgroundColor')
                        RoundedRectangle:
                            pos: self.pos
                            size: self.size
                            radius: [(10, 10), (10, 10), (10, 10), (10, 10)]

                    id: Confirm
                    font_name: app.Configuration.GetElementValue('PopupTitleFontName')
                    font_size: app.Configuration.GetElementValue('PopupInnerFontSize')
                    text: 'Confirm Account'
                    disabled: True
                    on_release: root.ConfirmAccount()

                Button:
                    background_color: 0,0,0,0
                    canvas.before:
                        Color:
                            rgba: app.Configuration.GetElementValue('CancelBtnBackgroundColor')
                        RoundedRectangle:
                            pos: self.pos
                            size: self.size
                            radius: [(10, 10), (10, 10), (10, 10), (10, 10)]

                    id: Cancel
                    font_name: app.Configuration.GetElementValue('PopupTitleFontName')
                    font_size: app.Configuration.GetElementValue('PopupInnerFontSize')
                    text:'Cancel'
                    on_release: root.Cancel()
